#include <stdio.h>
#include <stdint.h>

uint64_t invtr2h_64 (uint64_t rs1, uint64_t rs2) {
	uint64_t rd; 	
	rd = 	((rs2 & 0x0000000000000002) >> 1)  | ((rs2 & 0x0000000000000008) >> 2)  | ((rs2 & 0x0000000000000020) >> 3)  | ((rs2 & 0x0000000000000080) >> 4)  |
		((rs2 & 0x0000000000000200) >> 5)  | ((rs2 & 0x0000000000000800) >> 6)  | ((rs2 & 0x0000000000002000) >> 7)  | ((rs2 & 0x0000000000008000) >> 8)  |
		((rs2 & 0x0000000000020000) >> 9)  | ((rs2 & 0x0000000000080000) >> 10) | ((rs2 & 0x0000000000200000) >> 11) | ((rs2 & 0x0000000000800000) >> 12) |
		((rs2 & 0x0000000002000000) >> 13) | ((rs2 & 0x0000000008000000) >> 14) | ((rs2 & 0x0000000020000000) >> 15) | ((rs2 & 0x0000000080000000) >> 16) |
		((rs2 & 0x0000000200000000) >> 17) | ((rs2 & 0x0000000800000000) >> 18) | ((rs2 & 0x0000002000000000) >> 19) | ((rs2 & 0x0000008000000000) >> 20) |
		((rs2 & 0x0000020000000000) >> 21) | ((rs2 & 0x0000080000000000) >> 22) | ((rs2 & 0x0000200000000000) >> 23) | ((rs2 & 0x0000800000000000) >> 24) |
		((rs2 & 0x0002000000000000) >> 25) | ((rs2 & 0x0008000000000000) >> 26) | ((rs2 & 0x0020000000000000) >> 27) | ((rs2 & 0x0080000000000000) >> 28) |
		((rs2 & 0x0200000000000000) >> 29) | ((rs2 & 0x0800000000000000) >> 30) | ((rs2 & 0x2000000000000000) >> 31) | ((rs2 & 0x8000000000000000) >> 32) |
		((rs1 & 0x0000000000000002) << 31) | ((rs1 & 0x0000000000000008) << 30) | ((rs1 & 0x0000000000000020) << 29) | ((rs1 & 0x0000000000000080) << 28) |
		((rs1 & 0x0000000000000200) << 27) | ((rs1 & 0x0000000000000800) << 26) | ((rs1 & 0x0000000000002000) << 25) | ((rs1 & 0x0000000000008000) << 24) |
		((rs1 & 0x0000000000020000) << 23) | ((rs1 & 0x0000000000080000) << 22) | ((rs1 & 0x0000000000200000) << 21) | ((rs1 & 0x0000000000800000) << 20) |
		((rs1 & 0x0000000002000000) << 19) | ((rs1 & 0x0000000008000000) << 18) | ((rs1 & 0x0000000020000000) << 17) | ((rs1 & 0x0000000080000000) << 16) |
		((rs1 & 0x0000000200000000) << 15) | ((rs1 & 0x0000000800000000) << 14) | ((rs1 & 0x0000002000000000) << 13) | ((rs1 & 0x0000008000000000) << 12) |
		((rs1 & 0x0000020000000000) << 11) | ((rs1 & 0x0000080000000000) << 10) | ((rs1 & 0x0000200000000000) << 9)  | ((rs1 & 0x0000800000000000) << 8)  |
		((rs1 & 0x0002000000000000) << 7)  | ((rs1 & 0x0008000000000000) << 6)  | ((rs1 & 0x0020000000000000) << 5)  | ((rs1 & 0x0080000000000000) << 4)  |
		((rs1 & 0x0200000000000000) << 3)  | ((rs1 & 0x0800000000000000) << 2)  | ((rs1 & 0x2000000000000000) << 1)  | ((rs1 & 0x8000000000000000)     )  ;

	return rd;
}

int main (int argc, char *argv[]) {

	uint64_t rs1 = 0x5555555555555555; 		
	uint64_t rs2 = 0x5555555555555555; 		
	uint64_t rd;

	rd = invtr2h_64 (rs1, rs2);

	printf("result: %016lx\n", rd);
	
	return 0;
}
