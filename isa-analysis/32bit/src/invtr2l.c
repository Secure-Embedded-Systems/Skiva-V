#include <stdio.h>
#include <stdint.h>

uint32_t invtr2l (uint32_t rs1, uint32_t rs2) {
	uint32_t rd; 	
	rd = (rs2 & 0x00000001) | ((rs2 & 0x00000004) >> 1) | ((rs2 & 0x00000010) >> 2) | ((rs2 & 0x00000040) >> 3) |
		((rs2 & 0x00000100) >> 4) | ((rs2 & 0x00000400) >> 5) | ((rs2 & 0x00001000) >> 6) | ((rs2 & 0x00004000) >> 7) |
		((rs2 & 0x00010000) >> 8) | ((rs2 & 0x00040000) >> 9) | ((rs2 & 0x00100000) >> 10) | ((rs2 & 0x00400000) >> 11) |
		((rs2 & 0x01000000) >> 12) | ((rs2 & 0x04000000) >> 13) | ((rs2 & 0x10000000) >> 14) | ((rs2 & 0x40000000) >> 15) |
		((rs1 & 0x00000001) << 16) | ((rs1 & 0x00000004) << 15) | ((rs1 & 0x00000010) << 14) | ((rs1 & 0x00000040) << 13) |
		((rs1 & 0x00000100) << 12) | ((rs1 & 0x00000400) << 11) | ((rs1 & 0x00001000) << 10) | ((rs1 & 0x00004000) << 9) |
		((rs1 & 0x00010000) << 8) | ((rs1 & 0x00040000) << 7) | ((rs1 & 0x00100000) << 6) | ((rs1 & 0x00400000) << 5) |
		((rs1 & 0x01000000) << 4) | ((rs1 & 0x04000000) << 3) | ((rs1 & 0x10000000) << 2) | ((rs1 & 0x40000000) << 1);

	return rd;
}

int main (int argc, char *argv[]) {

	uint32_t rs1 = 0x55555555; 		
	uint32_t rs2 = 0x55555555; 		
	uint32_t rd;

	rd = invtr2l (rs1, rs2);

	printf("result: %08x\n", rd);
	
	return 0;
}
